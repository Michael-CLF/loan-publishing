<div class="admin-container">
    <!-- Admin Login Screen -->
    <div *ngIf="!adminAuthenticated()" class="admin-login">
        <h1 class="title">Admin Access</h1>
        <p class="content">Enter admin code to continue</p>

        <div *ngIf="codeError()" class="error-message">
            Invalid admin code. Please try again.
        </div>

        <div class="code-form">
            <input type="password" [(ngModel)]="enteredCode" placeholder="Enter admin code" class="code-input" />
            <button (click)="verifyAdminCode()" class="submit-btn">
                Continue
            </button>
        </div>
    </div>

    <!-- Admin Dashboard (only shown after authentication) -->
    <div *ngIf="adminAuthenticated()" class="admin-dashboard">
        <div class="admin-header">
            <h1 class="admin-dash-title">Admin Dashboard</h1>
            <button class="exit-btn" (click)="exitAdminMode()">Exit Admin Mode</button>
        </div>

        <div *ngIf="loading()" class="loading-container">
            <div class="spinner"></div>
            <p>Loading user data...</p>
        </div>

        <div *ngIf="error()" class="error-container">
            <p class="error-message">{{ error() }}</p>
            <button class="retry-btn" (click)="loadAllUsers()">Try Again</button>
        </div>

        <div *ngIf="!loading() && !error()" class="admin-content">
            <div class="stats-container">
                <div class="stat-card">
                    <h3 class="sub-title">Total Originators</h3>
                    <span class="stat-value">{{ originators().length }}</span>
                </div>
                <div class="stat-card">
                    <h3 class="sub-title">Total Lenders</h3>
                    <span class="stat-value">{{ lenders().length }}</span>
                </div>
            </div>

            <!-- Originators Section -->
            <div class="section-container">
                <h2 class="sub-title">Originators</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Company</th>
                                <th>Location</th>
                                <th>Created</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let user of originators()">
                                <td>{{ user.firstName }} {{ user.lastName }}</td>
                                <td>{{ user.email }}</td>
                                <td>{{ user.company || 'N/A' }}</td>
                                <td>{{ user.city }}, {{ user.state }}</td>
                                <td>{{ formatDate(user.createdAt) }}</td>
                            </tr>
                            <tr *ngIf="originators().length === 0">
                                <td colspan="5" class="no-data">No originators found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Lenders Section -->
            <div class="section-container">
                <h2 class="sub-title">Lenders</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Company</th>
                                <th>Location</th>
                                <th>Created</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let lender of lenders()">
                                <td>{{ lender.firstName }} {{ lender.lastName }}</td>
                                <td>{{ lender.email }}</td>
                                <td>{{ lender.company || 'N/A' }}</td>
                                <td>{{ lender.city }}, {{ lender.state }}</td>
                                <td>{{ formatDate(lender.createdAt) }}</td>
                            </tr>
                            <tr *ngIf="lenders().length === 0">
                                <td colspan="5" class="no-data">No lenders found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>