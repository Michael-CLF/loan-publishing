<div class="calc-container">
<div class="calc-card">
  <h2 class="title">Rent vs. Buy</h2>

  <form [formGroup]="form" class="grid">
    <div class="field">
      <label for="purchasePrice">Home Price</label>
      <input id="purchasePrice" type="number" formControlName="purchasePrice" min="1" step="1000" />
    </div>
    <div class="field">
      <label for="downPaymentPct">Down Payment (%)</label>
      <input id="downPaymentPct" type="number" formControlName="downPaymentPct" min="0" max="100" step="0.1" />
      <div class="hint">Loan Amount: {{ loanAmount() | currency:'USD' }}</div>
    </div>
    <div class="field">
      <label for="rateAnnualPct">Rate (APR %)</label>
      <input id="rateAnnualPct" type="number" formControlName="rateAnnualPct" min="0" step="0.01" />
    </div>
    <div class="field">
      <label for="termYears">Term (years)</label>
      <input id="termYears" type="number" formControlName="termYears" min="1" max="40" />
    </div>
    <div class="field">
      <label for="closingCosts">Closing Costs ($)</label>
      <input id="closingCosts" type="number" formControlName="closingCosts" min="0" step="100" />
    </div>
    <div class="field">
      <label for="pmiAnnualPct">PMI (% of loan, annual)</label>
      <input id="pmiAnnualPct" type="number" formControlName="pmiAnnualPct" min="0" step="0.01" />
      <div class="hint">Applied only if down &lt; 20%.</div>
    </div>
    <div class="field">
      <label for="hoaMonthly">HOA (monthly)</label>
      <input id="hoaMonthly" type="number" formControlName="hoaMonthly" min="0" step="10" />
    </div>

    <div class="sep"></div>

    <div class="field">
      <label for="propTaxRatePct">Property Tax Rate (% of price, annual)</label>
      <input id="propTaxRatePct" type="number" formControlName="propTaxRatePct" min="0" step="0.01" />
    </div>
    <div class="field">
      <label for="insuranceAnnual">Insurance (annual)</label>
      <input id="insuranceAnnual" type="number" formControlName="insuranceAnnual" min="0" step="50" />
    </div>
    <div class="field">
      <label for="maintenancePctOfPrice">Maintenance (% of price, annual)</label>
      <input id="maintenancePctOfPrice" type="number" formControlName="maintenancePctOfPrice" min="0" step="0.1" />
    </div>

    <div class="sep"></div>

    <div class="field">
      <label for="homeAppreciationPct">Home Appreciation (annual %)</label>
      <input id="homeAppreciationPct" type="number" formControlName="homeAppreciationPct" min="0" step="0.1" />
    </div>
    <div class="field">
      <label for="expenseGrowthPct">Expense Growth (annual %)</label>
      <input id="expenseGrowthPct" type="number" formControlName="expenseGrowthPct" min="0" step="0.1" />
    </div>
    <div class="field">
      <label for="sellingCostsPct">Selling Costs (%, at sale)</label>
      <input id="sellingCostsPct" type="number" formControlName="sellingCostsPct" min="0" step="0.1" />
    </div>
    <div class="field">
      <label for="holdYears">Holding Period (years)</label>
      <input id="holdYears" type="number" formControlName="holdYears" min="1" max="40" />
    </div>

    <div class="sep"></div>

    <div class="field">
      <label for="rentMonthly">Rent (monthly)</label>
      <input id="rentMonthly" type="number" formControlName="rentMonthly" min="0" step="10" />
    </div>
    <div class="field">
      <label for="rentGrowthPct">Rent Growth (annual %)</label>
      <input id="rentGrowthPct" type="number" formControlName="rentGrowthPct" min="0" step="0.1" />
    </div>

    <div class="sep"></div>

    <div class="field">
      <label for="discountRatePct">Discount / Opportunity Cost (annual %)</label>
      <input id="discountRatePct" type="number" formControlName="discountRatePct" min="0" step="0.1" />
    </div>
  </form>

  <div class="summary">
    <div><strong>Monthly P&I:</strong> {{ monthlyPI() | currency:'USD' }}</div>
    <div><strong>Owner Cost (Year 1, mo):</strong> {{ ownerMonthlyYear1() | currency:'USD' }}</div>
    <div><strong>Upfront Cash:</strong> {{ upfrontCash() | currency:'USD' }}</div>
    <div><strong>Holding Period:</strong> {{ holdMonths() }} months</div>
  </div>

  <div class="summary">
    <div><strong>NPV (Own):</strong> {{ npvOwn() | currency:'USD' }}</div>
    <div><strong>NPV (Rent):</strong> {{ npvRent() | currency:'USD' }}</div>
    <div><strong>NPV Difference (Own − Rent):</strong> {{ npvDiff() | currency:'USD' }}</div>
    <div><strong>Cheaper by NPV:</strong> {{ ownCheaper() ? 'Buy' : 'Rent' }}</div>
  </div>

  <p class="disclaimer">
    Simplified model. Taxes/maintenance/insurance grow at “Expense Growth.” PMI applied if down &lt; 20%.
    Proceeds at sale = appreciated value minus selling costs and remaining balance. Results exclude taxes/MI effects.
  </p>
</div>
</div>
<div class="contact-container">
    <h2 class="contact-title">Ready to post your first loan scenario?</h2>
    <button (click)="openRoleSelectionModal()" class="calc-btn" class="register-btn">Register</button>
</div>