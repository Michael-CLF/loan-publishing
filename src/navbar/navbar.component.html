<nav class="navbar">
    <div class="navbar-container">
        <div class="navbar-logo">
            <a href="/">DLP</a>
        </div>
        <div class="navbar-actions">
            <div class="register" *ngIf="!isLoggedIn">
                <a href="/user-form" class="reg-btn">Register</a>
            </div>
            <div class="nav-menu">
                <!-- Hide "All Loans" from unauthenticated users -->
                <a *ngIf="isLoggedIn" href="/lender-list" class="all-loans">Lenders</a>
                <a *ngIf="isLoggedIn" href="/loans" class="all-loans">Loans</a>
            </div>

            <div *ngIf="!isLoggedIn" class="auth-links">
                <a href="/login" class="login-btn">Log In</a>
                <a href="/pricing" class="pricing">Pricing</a>
            </div>

            <div *ngIf="isLoggedIn" class="user-menu">
                <a [attr.href]="userRole === 'lender' ? '/lender-dashboard' : '/dashboard'"
                    class="dashboard-link">Dashboard</a>
                <!-- Replace this line only -->
                <div class="account-dropdown">
                    <button type="button" (click)="toggleAccountDropdown($event)" class="account-link">
                        My Account
                    </button>

                    <div *ngIf="isDropdownOpen" class="dropdown-content">
                        <div *ngIf="loading" class="dropdown-loading">Loading...</div>
                        <div *ngIf="userData && !loading" class="user-info">
                            <p class="user-name">{{ userData.firstName }} {{ userData.lastName }}</p>
                            <p class="user-email">{{ userData.email }}</p>
                            <p><strong>Account #:</strong> {{ accountNumber }}</p>
                            <p><strong>Phone:</strong> {{ formatPhoneNumber(userData.phone) }}</p>
                            <p><strong>Company:</strong> {{ userData.company }}</p>
                            <p><strong>Location:</strong> {{ userData.city }}, {{ userData.state }}</p>
                            <button (click)="logout()" class="logout-btn">Logout</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>